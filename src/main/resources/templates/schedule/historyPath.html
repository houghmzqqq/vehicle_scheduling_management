<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>物流公司车辆调度管理系统</title>
    <!-- Bootstrap Styles-->
    <link href="/assets/css/bootstrap.css" rel="stylesheet"/>
    <!-- FontAwesome Styles-->
    <link href="/assets/css/font-awesome.css" rel="stylesheet"/>
    <!-- Morris Chart Styles-->
    <link href="/assets/js/morris/morris-0.4.3.min.css" rel="stylesheet"/>
    <!-- Custom Styles-->
    <link href="/assets/css/custom-styles.css" rel="stylesheet"/>
    <!-- Google Fonts-->
    <link href='/assets/css/fonts-googleapis.css' rel='stylesheet' type='text/css'/>
    <link rel="stylesheet" href="/assets/js/Lightweight-Chart/cssCharts.css">
    <link rel="stylesheet" href="https://cache.amap.com/lbs/static/main.css"/>
    <link rel="stylesheet" href="http://cache.amap.com/lbs/static/main1119.css"/>
    <!--<style type="text/css">-->
    <!--#panel {-->
    <!--position: fixed;-->
    <!--background-color: white;-->
    <!--max-height: 70%;-->
    <!--overflow-y: auto;-->
    <!--top: 200px;-->
    <!--right: 10px;-->
    <!--width: 280px;-->
    <!--}-->
    <!--</style>-->
    <style rel="stylesheet">
        #historyTool {
            width: 400px;
            height: 250px;
            position: absolute;
            right: 0;
            top: 150px;
            z-index: 12;
        }
        #historyTable {
            height:150px;
        }
    </style>
</head>

<body>
<div id="wrapper">
    <nav class="navbar navbar-default top-navbar" role="navigation" th:include="header :: top-navbar">
    </nav>
    <!--/. NAV TOP  -->
    <nav class="navbar-default navbar-side" role="navigation" th:include="sidebar :: navbar-side">
    </nav>
    <!-- /. NAV SIDE  -->

    <div id="page-wrapper">
         <!-- 模态框 -->
        <div class="modal fade bs-example-modal-lg" id="myModal" role="dialog">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title">Modal title</h4>
                    </div>
                    <div class="modal-body">
                        <!-- 行车记录列表 -->
                        <div class="table-responsive pre-scrollable">
                            <table class="table table-striped table-bordered table-hover">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>车牌号</th>
                                        <th>日期</th>
                                        <th>开始时间</th>
                                        <th>结束时间</th>
                                        <th>开始地点</th>
                                        <th>结束地点</th>
                                        <th>里程</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><input type="checkbox"/></td>
                                        <td>1</td>
                                        <td>Mark</td>
                                        <td>Otto</td>
                                        <td>@mdo</td>
                                        <td>Mark</td>
                                        <td>Otto</td>
                                        <td>@mdo</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                        <button type="button" class="btn btn-primary">确定</button>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div>
        <!-- /.modal -->

        <div class="header">
            <ol class="breadcrumb">
                <li><a href="#">主页</a></li>
                <li><a href="#">调度申请 </a></li>
                <li class="active">整车调度</li>
            </ol>
        </div>

        <div class="panel panel-default" id="historyTool">
            <div class="panel-heading">
                <button class="btn btn-default btn-sm" type="button" style="background-color: #0aacff !important;border-color: #0aacff;">
                    <img src="/assets/img/suspend.jpg"/>
                </button>
                <button class="btn btn-default btn-sm" id="showModal" onclick="showModal()"
                        type="button" style="background-color: #0aacff !important;border-color: #0aacff;">
                    <img src="/assets/img/search.jpg"/>
                </button>
            </div>
            <div class="panel-body">
                <div class="table-responsive pre-scrollable" id="historyTable">
                    <table class="table table-striped table-bordered table-hover">
                        <thead>
                        <tr>
                            <th>#</th>
                            <th>First Name</th>
                            <th>Last Name</th>
                            <th>Username</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>1</td>
                            <td>Mark</td>
                            <td>Otto</td>
                            <td>@mdo</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>Jacob</td>
                            <td>Thornton</td>
                            <td>@fat</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>Larry</td>
                            <td>the Bird</td>
                            <td>@twitter</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>Larry</td>
                            <td>the Bird</td>
                            <td>@twitter</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>Larry</td>
                            <td>the Bird</td>
                            <td>@twitter</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>Larry</td>
                            <td>the Bird</td>
                            <td>@twitter</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>Larry</td>
                            <td>the Bird</td>
                            <td>@twitter</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="panel-body" id="map-window" style="height: 800px;">

        </div>

        <!--<div class="row">-->

            <!--<div class="col-md-12">-->
                <!--<div class="panel panel-default">-->
                    <!--<div class="panel-heading">-->
                        <!--地图-->
                    <!--</div>-->

                    <!--<div class="panel-body" id="map-window" style="height: 600px;">-->


                    <!--</div>-->
                    <!--<div id="panel"></div>-->
                <!--</div>-->
            <!--</div>-->
        <!--</div>-->
        <!-- row -->

    </div>


    <!-- /. PAGE WRAPPER  -->
</div>
<!-- /. WRAPPER  -->
<!-- JS Scripts-->
<!-- jQuery Js -->
<script src="/assets/js/jquery-1.10.2.js"></script>
<!-- Bootstrap Js -->
<script src="/assets/js/bootstrap.min.js"></script>
<script src="/assets/js/morris/morris.js"></script>

<!-- Metis Menu Js -->
<script src="/assets/js/jquery.metisMenu.js"></script>

<script src="/assets/js/easypiechart.js"></script>
<script src="/assets/js/easypiechart-data.js"></script>

<script src="/assets/js/Lightweight-Chart/jquery.chart.js"></script>

<!-- Custom Js -->
<script src="/assets/js/custom-scripts.js"></script>

<!--<script src="http://webapi.amap.com/maps?v=1.4.6&key=4b3e05927c7a55aa1a6526687c38207a&callback=init&plugin=AMap.Driving"></script>-->
<script type="text/javascript"
        src="http://webapi.amap.com/maps?v=1.4.6&key=4b3e05927c7a55aa1a6526687c38207a&plugin=AMap.Driving"></script>
<script src="https://webapi.amap.com/js/marker.js"></script>

<script type="text/javascript">
    function showModal() {
        //获取历史行车记录列表
        $.ajax({
            //几个参数需要注意一下
            type: "POST",//方法类型
            async:false,
            dataType: "json",//预期服务器返回的数据类型
            url: "/truck/updateTruck" ,//url
            data: $('#register_form').serialize(),
            success: function (result) {
                console.log(result);//打印服务端返回的数据(调试用)
                if (result.rel == "yes") {
                    alert("SUCCESS");
                }else{
                    alert("success2");
                }
            },
            error: function(XMLHttpRequest, textStatus, errorThrown){
                alert(XMLHttpRequest.status);
                alert(XMLHttpRequest.readyState);
                alert(textStatus);
            }
        });

        $("#myModal").modal();
    }
</script>

<script type="text/javascript">
    //创建一个地图
    var map = new AMap.Map('map-window', {
        center: [114.420433, 23.069401],
        zoom: 6
    });

    //点标注
    //    var marker;
    //    marker = new AMap.Marker({
    ////        icon: icon,
    //        position: "114.420433,23.069401".split(","),
    ////        offset: new AMap.Pixel(-12,-12),
    ////        zIndex: 101,
    //        title: "总公司",
    //        map: map
    //    });

    //构建信息窗体中显示的内容
    //    var info = [];
    //    info.push("<div style=\"padding:0px 0px 0px 0px;\"><b>高德软件有限公司</b><br/>");
    //    info.push("电话 : 010-84107000   邮编 : 100102<br/>");
    //    info.push("地址 : 北京市望京阜通东大街方恒国际中心A座16层</div></div><br>");
    //    infoWindow = new AMap.InfoWindow({
    //        content: info.join("<br>")  //使用默认信息窗体框样式，显示信息内容
    //    });
    //    infoWindow.open(map, [114.420433,23.069401]);

    //构造路线导航类
    var driving = new AMap.Driving({
        map: map,
//        panel: "panel"
    });
    // 根据起终点名称规划驾车导航路线
    //    driving.search([
    //        {keyword: '惠州市火车南站',city:'惠州'},
    //        {keyword: '广州市天河客运站',city:'广州'}
    //    ]);
    //通过坐标点规划路线
    //    driving.search([114.423933,23.058291],[113.342309,23.170892],[110.301129,21.150769],function (status,result) {
    //
    //    });

    function selectOne(address, city) {
        driving.search([
            {keyword: '惠州市火车南站', city: '惠州'},
            {keyword: address, city: city}
        ]);
    }

</script>
<script type="text/javascript" src="https://webapi.amap.com/demos/js/liteToolbar.js"></script>

</body>

</html>